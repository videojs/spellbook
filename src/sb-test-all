#!/usr/bin/env node
var RunAll = require('./utils/run-all');
var CommanderWrapper = require('./utils/commander-wrapper');
var exec = require('./utils/exec');
var config = require('./utils/get-config')();

var program = CommanderWrapper(function(commander) {
  return commander
    .option('-w, --watch', 'keep the tester running and run as things change')
    .option('-n, --no-build', 'dont build before testing');
});

if (!config.test) {
  process.exit(0);
}

if (program.build) {
  exec('sb-build');
}

var commands = [
  ['sb-test-browser'],
];
var args = ['--no-build'];

if (program.watch) {
  args.push('--watch');
}

RunAll(commands, args);
